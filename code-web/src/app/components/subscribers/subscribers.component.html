<div>
  <div class="container">
    <h2>Add New Subscriber</h2>
    <form (ngSubmit)="add(subscriber)">
      <div class="form-group">
        <label for="username">Username</label>
        <input [(ngModel)]="subscriber.username" type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input [(ngModel)]="subscriber.password" type="text" class="form-control" id="password" name="password" placeholder="Enter password" required>
      </div>
      <div class="form-group">
          <label for="phoneNumber">Phone Number</label>
          <input [(ngModel)]="subscriber.phoneNumber" type="tel" class="form-control" id="phoneNumber" name="phoneNumber" placeholder="Enter phone number" required>
      </div>
      <div class="form-group">
          <label for="domain">Domain</label>
          <input [(ngModel)]="subscriber.domain" type="url" class="form-control" id="domain" name="domain" placeholder="Enter domain" required>
      </div>

      <div class="form-group">
        <label for="status">Status</label>
        <select [(ngModel)]="subscriber.status" class="form-control" id="status" name="status" required>
          <option value="ACTIVE">ACTIVE</option>
          <option value="DISABLED">DISABLED</option>
        </select>
      </div>
      <h3>Features</h3>
      <h4>Call Forward No Reply</h4>
      <div class="form-group">
        <label for="callForwardNoReply-provisioned">Provision</label>
        <select [(ngModel)]="subscriber.features.callForwardNoReply.provisioned" class="form-control" id="callForwardNoReply-provisioned" name="callForwardNoReply-provisioned">
          <option value="true">Yes</option>
          <option value="false">No</option>
        </select>
      </div>
      <div class="form-group" *ngIf="subscriber.features.callForwardNoReply.provisioned">
        <label for="callForwardNoReply-destination">Destination</label>
        <input [(ngModel)]="subscriber.features.callForwardNoReply.destination" type="text" class="form-control" id="callForwardNoReply-destination" name="callForwardNoReply-destination" placeholder="tel:"> 
      </div>
      <button type="submit" class="btn btn-primary">Add</button>
    </form>
  </div>
  <div class="container">
    <h2>Subscribers</h2>
    <ngx-datatable
      #SubscriberTable
      class='bootstrap'
      [columnMode]="'force'"
      [headerHeight]="50"
      [footerHeight]="50"
      [rowHeight]="50"
      [rows]='subscribers'
    >
      <!-- Row Detail Template -->
      <ngx-datatable-row-detail [rowHeight]="100">
        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>
          <div style="padding-left:35px;padding-right:100px;">
            <div><strong>Features</strong></div>
            <div class="container">
              <div class="row">
                <div class="col">
                  Call Forward No Reply
                </div>
                <div class="col-8">
                    <div class="row">
                        <div class="col">
                          Provisioned
                        </div>
                        <div class="col">
                          {{row.features.callForwardNoReply.provisioned}}
                        </div>
                    </div>
                    <div class="row">
                      <div class="col">
                          Destination
                      </div>
                      <div class="col">
                        {{row.features.callForwardNoReply.destination}}
                      </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </ngx-datatable-row-detail>
      <!-- Column Templates -->
      <ngx-datatable-column
        [width]="50"
        [resizeable]="false"
        [sortable]="false"
        [draggable]="false"
        [canAutoResize]="false">
        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
          <a
            href="javascript:void(0)"
            title="Expand/Collapse Row"
            (click)="toggleExpandRow(row)">
            <i class="fa fa-plus-circle" [ngClass]="{'fa-plus-circle text-success' : !expanded, 'fa-minus-circle text-danger' : expanded}" ></i>
          </a>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Username" [width]="100">
        <ng-template let-row="row" ngx-datatable-cell-template>
            {{row['username']}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Phone Number" [width]="100">
        <ng-template let-row="row" ngx-datatable-cell-template>
          {{row['phoneNumber']}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Password" [width]="100">
        <ng-template let-row="row" ngx-datatable-cell-template>
          {{row['password']}}
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Domain" [width]="200">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{row['domain']}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Status" [width]="25">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{row['status']}}
          </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="" [width]="25">
          <ng-template let-row="row" ngx-datatable-cell-template>
            <button class="btn btn-primary btn-sm ng-scope" routerLink="/update/{{row._id}}"><i class="fa fa-pencil-square-o"></i></button>
            <button class="btn btn-danger btn-sm ng-scope" (click)="del(row)"><i class="fa fa-trash"></i></button>
          </ng-template>
      </ngx-datatable-column>
    </ngx-datatable>
  </div>
</div>